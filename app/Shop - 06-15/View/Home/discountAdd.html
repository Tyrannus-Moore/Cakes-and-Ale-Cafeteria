<extend name="Public/base" />
<block name="main-content">
    <div class="page-content" style="padding-top: 50px">
        <link href="/public/content/css/bootstrap-datetimepicker.min.css" rel="stylesheet">
        <!--主题-->
        <div class="page-header">
            <h1>您当前操作
                <small>
                    <i class="ace-icon fa fa-angle-double-right"></i>添加折扣
                </small>
            </h1>
        </div>
        <div class="row">
            <div class="col-xs-12">
                <form class="form-horizontal ajaxFormT" name="admin_list_add" method="post" action="{:U('discountAdd')}">
                    <div class="form-group">
                        <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 折扣：  </label>
                        <div class="col-sm-8">
                            <input type="number" name="discount" step="0.1" min="0.1" max="10" placeholder="折扣" maxlength="10" class="col-xs-10 col-sm-1" required/>
                            <span class="lbl col-xs-12 col-sm-7"><span class="red">*</span></span>
                        </div>
                    </div>
                    <div class="space-4"></div>

                    <div class="form-group">
                        <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 开始时间：  </label>
                        <div class="col-sm-8">
                            <input name="start_time" id="start_time" class="col-xs-10 col-sm-1" type="text" readonly="readonly" required/>
                            <span class="lbl col-xs-12 col-sm-7"><span class="red">*</span></span>
                        </div>
                    </div>
                    <div class="space-4"></div>

                    <div class="form-group">
                        <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 结束时间：  </label>
                        <div class="col-sm-8">
                            <input name="end_time" id="end_time" class="col-xs-10 col-sm-1" type="text" readonly="readonly" required/>
                            <span class="lbl col-xs-12 col-sm-7"><span class="red">*</span></span>
                        </div>
                    </div>
                    <div class="space-4"></div>

                    <div class="clearfix form-actions">
                        <div class="col-md-offset-3 col-md-9">
                            <button class="btn btn-info" type="submit">
                                <i class="ace-icon fa fa-check bigger-110"></i>
                                保存
                            </button>
                            &nbsp; &nbsp; &nbsp;
                            <a href="javascript:history.back(-1)">
                                <i class="ace-icon fa fa-undo bigger-110"></i> 返回
                            </a>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div><!-- /.page-content -->
    <script src="/public/content/js/bootstrap-datetimepicker.min.js" type="text/javascript"></script>
    <script src="/public/content/js/bootstrap-datetimepicker.zh-CN.js" type="text/javascript"></script>
    <script type="text/javascript">
        var myDate = new Date();
        //获取当前年
        var year=myDate.getFullYear();
        //获取当前月
        var month=myDate.getMonth()+1;
        //获取当前日
        var date=myDate.getDate();
        /*时间插件*/
        $('#start_time').datetimepicker({
            format: 'hh:ii',
            bootcssVer: 3,
            language: 'zh-CN', /*加载日历语言包，可自定义*/
            weekStart: 1,
            todayBtn: 1,
            autoclose: 1,
            todayHighlight: 1,
            startView: 0,
            minView: 0,
            forceParse: 0
        }).on("click",function(ev){
            //var hs = $("#end_time").val();
           // if(hs == ''){
            //    var time = '';
            ///}else{
            //    var time = year+'-'+month+'-'+date+' '+hs;
            //}
            //$("#start_time").datetimepicker("setEndDate", time);
            // console.log($("#end_time").val())
            // $("#start_time").datetimepicker("setEndDate", $("#end_time").val());
        });
        /*时间插件*/
        $('#end_time').datetimepicker({
            format: 'hh:ii',
            bootcssVer: 3,
            language: 'zh-CN', /*加载日历语言包，可自定义*/
            weekStart: 1,
            todayBtn: 1,
            autoclose: 1,
            todayHighlight: 1,
            startView: 0,
            minView: 0,
            forceParse: 0
        }).on("click", function (ev) {
            //var hs = $("#start_time").val();
            //if(hs == ''){
            //    var time = '';
            //}else{
            //    var time = year+'-'+month+'-'+date+' '+hs;
            //}
            //$("#end_time").datetimepicker("setStartDate", time);
            // console.log($("#start_time").val())
            // $("#end_time").datetimepicker("setStartDate", $("#start_time").val());
        });

        $(function(){
            $('.ajaxFormT').ajaxForm({
                beforeSubmit: tBeforeForm,
                success: complete2, // 这是提交后的方法
                dataType: 'json'
            });
        });
        function tBeforeForm() {
            var start_time = $("#start_time").val();
            var end_time = $("#end_time").val();
            console.log(start_time);
            if(start_time == '' || end_time == ''){
                layer.alert("开始时间或结束时间不能为空");
                return false;
            }
        }
    </script>
</block>